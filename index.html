<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Florr.io Clone</title>
<style>
  body { margin: 0; overflow: hidden; background: #90ee90; }
  canvas { display: block; margin: 0 auto; background: #c4e3b3; }
  #score { font-family: sans-serif; font-size: 20px; color: #0a0; text-align: center; }
</style>
</head>
<body>
<div id="score">Petals Collected: 0</div>
<canvas id="game" width="400" height="400"></canvas>
<script>
(() => {
  const canvas = document.getElementById('game');
  const ctx = canvas.getContext('2d');
  const width = canvas.width;
  const height = canvas.height;
  let score = 0;

  const player = { x: width/2, y: height/2, size: 20, speed: 3 };
  const mobs = [];
  const mobCount = 5;

  for (let i=0; i<mobCount; i++) {
    mobs.push({
      x: Math.random()*(width-20)+10,
      y: Math.random()*(height-20)+10,
      size: 15,
      dx: (Math.random()-0.5)*2,
      dy: (Math.random()-0.5)*2,
    });
  }

  const keys = {};
  window.addEventListener('keydown', e => keys[e.key] = true);
  window.addEventListener('keyup', e => keys[e.key] = false);

  function movePlayer() {
    if(keys.ArrowUp && player.y > player.size) player.y -= player.speed;
    if(keys.ArrowDown && player.y < height - player.size) player.y += player.speed;
    if(keys.ArrowLeft && player.x > player.size) player.x -= player.speed;
    if(keys.ArrowRight && player.x < width - player.size) player.x += player.speed;
  }

  function moveMobs() {
    mobs.forEach(m => {
      m.x += m.dx;
      m.y += m.dy;
      if(m.x < m.size || m.x > width - m.size) m.dx = -m.dx;
      if(m.y < m.size || m.y > height - m.size) m.dy = -m.dy;
    });
  }

  function checkCollisions() {
    for(let i=mobs.length-1; i>=0; i--) {
      let m = mobs[i];
      const dist = Math.hypot(player.x - m.x, player.y - m.y);
      if(dist < player.size + m.size) {
        mobs.splice(i,1);
        score++;
        document.getElementById('score').textContent = 'Petals Collected: ' + score;
        spawnMob();
      }
    }
  }

  function spawnMob() {
    mobs.push({
      x: Math.random()*(width-20)+10,
      y: Math.random()*(height-20)+10,
      size: 15,
      dx: (Math.random()-0.5)*2,
      dy: (Math.random()-0.5)*2,
    });
  }

  function draw() {
    ctx.clearRect(0,0,width,height);

    // Draw player
    ctx.fillStyle = '#ff69b4';
    ctx.beginPath();
    ctx.arc(player.x, player.y, player.size, 0, Math.PI*2);
    ctx.fill();

    // Draw mobs
    ctx.fillStyle = '#228b22';
    mobs.forEach(m => {
      ctx.beginPath();
      ctx.arc(m.x, m.y, m.size, 0, Math.PI*2);
      ctx.fill();
    });
  }

  function gameLoop() {
    movePlayer();
    moveMobs();
    checkCollisions();
    draw();
    requestAnimationFrame(gameLoop);
  }

  gameLoop();
})();
</script>
</body>
</html>
